<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="S.ico" />
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/calculction.css">
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <!-- <script src="js/calculction.js" defer></script> -->
    <title>给桉桉的计算题+-法</title>


</head>

<body>
    <div id="loading">loading...</div>

    <!-- 各种设定 start -->
    <header class="w">
        <ul>
            <li class="liTextAndButton">
                <input id="textStart" type="text" name="textStart" id="" value="0">
                <section class="sectionTextAndButton">
                    <!-- <div class="btnAdd" id="textStartAdd"></div>
                    <div class="btnCut" id="textStartCut"></div> -->

                    <button class="btnAdd" id="textStartAdd"></button>
                    <button class="btnCut" id="textStartCut"></button>
                </section>

            </li>

            <li>
                <span>至</span>
            </li>


            <li class="liTextAndButton">
                <input id="textEnd" type="text" name="textEnd" id="" value="50">
                <section class="sectionTextAndButton">
                    <!-- <div class="btnAdd" id="textEndAdd"></div>
                    <div class="btnCut" id="textEndCut"></div> -->

                    <button class="btnAdd" id="textEndAdd"></button>
                    <button class="btnCut" id="textEndCut"></button>
                </section>
            </li>

            <li>
                <div>
                    <span>之间</span>
                </div>
            </li>

            <li>
                <section class="AddCut">
                    <!-- <div>
                        <input id="cbxAdd" type="checkbox" name=""><label for="cbxAdd">加法</label>
                    </div>

                    <div>
                        <input id="cbxCut" type="checkbox" name=""><label for="cbxCut">减法</label>
                    </div> -->

                    <div>
                        <input type="radio" name="radioCal" id="Add" value="Add"><label for="Add"> 加法 </label><br>
                        <input type="radio" name="radioCal" id="Cut" value="Cut" checked><label for="Cut"> 减法 </label><br>
                        <!-- <input type="radio" name="radioCal" id="AddAndCut" value="AddAndCut"><label for="AddAndCut"> 加法和减法 </label> -->
                    </div>
                </section>
            </li>

            <li>
                <div>
                    <span>计算题</span>
                </div>
            </li>
        </ul>
    </header>
    <!-- 各种设定 over -->


    <!-- 计算式 start -->
    <div class="question w">
        <ul>
            <li id="rand1">5</li>
            <li id="AddOrCut">+</li>
            <li id="rand2">5</li>
            <li>=</li>
            <li id="cal">10</li>
        </ul>
    </div>
    <!-- 计算式 end -->


    <div class="input w clearfix">
        <section class="number">
            <ul>
                <!-- 
                <li id="id1">1</li>
                <li id="id2">2</li>
                <li id="id3">3</li>
                <li id="id4">4</li>
                <li id="id5">5</li>
                <li id="id6">6</li>
                <li id="id7">7</li>
                <li id="id8">8</li>
                <li id="id9">9</li>
                <li id="id0">0</li>
                <li id="idC">C</li>
                <li id="idOK">OK</li>
                <li id="nextAsk">下一题</li> -->

                <li><button id="id1">1</button></li>
                <li><button id="id2">2</button></li>
                <li><button id="id3">3</button></li>
                <li><button id="id4">4</button></li>
                <li><button id="id5">5</button></li>
                <li><button id="id6">6</button></li>
                <li><button id="id7">7</button></li>
                <li><button id="id8">8</button></li>
                <li><button id="id9">9</button></li>
                <li><button id="id0">0</button></li>
                <li><button id="idC">C</button></li>
                <li><button id="idOK">OK</button></li>
                <li id="liNextAsk"><button id="nextAsk" disabled>下一题</button></li>
                <!-- <li><button id="nextAsk"></button></li> -->



            </ul>
        </section>


        <section class="result">
            <div class="ask">
                <p>????</p>
                <img src="images/小鸡疑问.jpeg" alt="">
            </div>

            <div class="right">
                <p></p>
                <img src="images/good/小黄龙手指头.gif" alt="">
            </div>

            <div class="error">
                <p></p>
                <img src="images/error/猫No.gif" alt="">
            </div>


        </section>

    </div>

    <script>
        var tempResult;
        var listNumber;

        $(function() {
            nextAsk();
        });

        $('.number>ul>li').click(function() {
            var userClick = $(this).text();
            switch (userClick) {
                case 'C':
                    tempResult = '';
                    $('#cal').text(tempResult);
                    $('section.result div.error').css("display", "none");
                    $('section.result div.ask').css("display", "block");
                    break;

                case 'OK':

                    if (parseInt($('#cal').text()) == listNumber[2]) {
                        // 答案正确
                        $('section.result div.right').css("display", "block");
                        $('section.result div.ask').css("display", "none");

                        // $('#liNextAsk').css("display", "block");   // 打开下一题
                        $('#nextAsk').attr("disabled", false); // 打开下一题
                    } else {
                        // 答案错误
                        $('section.result div.error').css("display", "block");
                        $('section.result div.ask').css("display", "none");
                    }
                    break;
                case '下一题':

                    nextAsk();
                    break;
                default:
                    if (tempResult.length == 3) {
                        tempResult = tempResult.substring(0, 2);
                    }
                    tempResult = tempResult + userClick;
                    $('#cal').text(tempResult);
                    break;
            }
        });


        function nextAsk() {
            listNumber = getRandList(); // 得到题目和答案 [A,+B,=result]

            var cal = $('input:radio[name=radioCal]:checked').val(); // 做加法还是减法的 redio
            if (cal == 'Add') {
                $('#rand1').text(listNumber[0]);
                $('#AddOrCut').text('+');
                $('#rand2').text(listNumber[1]);
                $('#cal').text('');
                tempResult = '';
            }
            if (cal == 'Cut') {
                listNumber = listNumber.reverse();
                $('#rand1').text(listNumber[0]);
                $('#AddOrCut').text('-');
                $('#rand2').text(listNumber[1]);
                $('#cal').text('');
                tempResult = '';
            }
            console.log(listNumber);
            $('section.result div.right').css("display", "none");
            $('section.result div.ask').css("display", "block");
            // $('#liNextAsk').css("display", "none");   // 关闭下一题
            $('#nextAsk').attr("disabled", true); // 关闭下一题
            $('#loading').css("display", "none");
        }

        function getRandList() {
            // 得到 listRand[A, B, result] 3 个数的组合 list
            var listRand = [];
            var x = parseInt($('#textStart').val());
            var y = parseInt($('#textEnd').val());

            var result;
            var A = parseInt(Math.random() * (x - y) + y);
            var B = parseInt(Math.random() * (x - y) + y);

            // console.log(A);
            // console.log(B);

            if (A > B) {
                // A:10 B:8
                result = A;
                A = result - B;
                // result:10 B:8 A:2
            } else if (A == B) {
                // A:10 B:10
                result = A;
                A = result - B;
                // result:10 B:10 A:0
            } else if (A < B) {
                // A:7 B:25
                result = B; // result:25 B:25 A:7
                B = A; // result:25 B:7 A:7
                A = result - B;
                // result:12 B:10 A:2
            };

            listRand = [A, B, result];
            return listRand;
        };


        $('#textStartAdd').mousedown(function() {
            UpDown($('#textStart'), 1);
        })
        $('#textStartAdd').mouseup(function() {
            clearInterval(time1);
        })

        $('#textStartCut').mousedown(function() {
            UpDown($('#textStart'), -1);
        })
        $('#textStartCut').mouseup(function() {
            clearInterval(time1);
        })

        $('#textEndAdd').mousedown(function() {
            UpDown($('#textEnd'), 1);
        })
        $('#textEndAdd').mouseup(function() {
            clearInterval(time1);
        })

        $('#textEndCut').mousedown(function() {
            UpDown($('#textEnd'), -1);
        })
        $('#textEndCut').mouseup(function() {
            clearInterval(time1);
        })





        function UpDown(textId, number) {
            time1 = setInterval(() => {
                if (parseInt(textId.val()) == 0 && number == -1) {

                } else {
                    textId.val(parseInt(textId.val()) + number);
                }
            }, 50);
        }
    </script>

</body>

</html>